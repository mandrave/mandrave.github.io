<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Android Image Format | Hao&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Android系统图像相关的格式有RGB，YUV，RAW，JPEG等，这里介绍其中几种基本概念。 图形相关的image format定义在android.graphics.ImageFormat. RGB RGB代表红、绿、蓝三个颜色通道，每个点的颜色都是用这三种颜色的值叠加。 RGB_565  RGB565使用16位表示一个像素，这16位中的5位用于R，6位用于G，5位用于B。 每一个像素点的数">
<meta property="og:type" content="article">
<meta property="og:title" content="Android Image Format">
<meta property="og:url" content="http://yoursite.com/2017/08/01/Android-Image-Format/index.html">
<meta property="og:site_name" content="Hao&#39;s Blog">
<meta property="og:description" content="Android系统图像相关的格式有RGB，YUV，RAW，JPEG等，这里介绍其中几种基本概念。 图形相关的image format定义在android.graphics.ImageFormat. RGB RGB代表红、绿、蓝三个颜色通道，每个点的颜色都是用这三种颜色的值叠加。 RGB_565  RGB565使用16位表示一个像素，这16位中的5位用于R，6位用于G，5位用于B。 每一个像素点的数">
<meta property="og:updated_time" content="2017-08-01T15:51:46.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android Image Format">
<meta name="twitter:description" content="Android系统图像相关的格式有RGB，YUV，RAW，JPEG等，这里介绍其中几种基本概念。 图形相关的image format定义在android.graphics.ImageFormat. RGB RGB代表红、绿、蓝三个颜色通道，每个点的颜色都是用这三种颜色的值叠加。 RGB_565  RGB565使用16位表示一个像素，这16位中的5位用于R，6位用于G，5位用于B。 每一个像素点的数">
  
    <link rel="alternate" href="/atom.xml" title="Hao&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hao&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Android-Image-Format" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/01/Android-Image-Format/" class="article-date">
  <time datetime="2017-08-01T15:35:00.000Z" itemprop="datePublished">2017-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android Image Format
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Android</strong>系统图像相关的格式有RGB，YUV，RAW，JPEG等，这里介绍其中几种基本概念。</p>
<p>图形相关的image format定义在<a href="https://developer.android.com/reference/android/graphics/ImageFormat.html" target="_blank" rel="external">android.graphics.ImageFormat</a>.</p>
<h2 id="RGB"><a href="#RGB" class="headerlink" title="RGB"></a>RGB</h2><blockquote>
<p>RGB代表红、绿、蓝三个颜色通道，每个点的颜色都是用这三种颜色的值叠加。</p>
<h4 id="RGB-565"><a href="#RGB-565" class="headerlink" title="RGB_565"></a>RGB_565</h4><blockquote>
<p> RGB565使用16位表示一个像素，这16位中的5位用于R，6位用于G，5位用于B。</p>
<p>每一个像素点的数据如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; &gt; R R R R R G G G G G G B B B B B</div><div class="line">&gt; &gt;</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="FLEX-RGB-888"><a href="#FLEX-RGB-888" class="headerlink" title="FLEX _RGB _888"></a>FLEX _RGB _888</h4><blockquote>
<p>Mutli-plane Android RGB format, plane可以理解为平面，每一个像素点的颜色都由8位的R,G,B颜色决定。</p>
<p>图像数据由三个独立的data buffer表示，每一个buffer代表一个颜色平面。</p>
<p>使用plane方式存储图像数据时，存储数据使用的buffer还会保存<strong>row stride</strong>和<strong>pixel stride</strong>的信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; &gt; The order of planes in the array returned by Image#getPlanes() is guaranteed such that plane #0 is always R (red), plane #1 is always G (green), and plane #2 is always B (blue).</div><div class="line">&gt; &gt; All three planes are guaranteed to have the same row strides and pixel strides.</div><div class="line">&gt; &gt;</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="FLEX-RGBA-8888"><a href="#FLEX-RGBA-8888" class="headerlink" title="FLEX_RGBA_8888"></a>FLEX_RGBA_8888</h4><blockquote>
<p>比FLEX _RGB _888多了一个alpha通道，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; &gt; The order of planes in the array returned by Image#getPlanes() is guaranteed such that plane #0 is always R (red), plane #1 is always G (green), plane #2 is always B (blue), and plane #3 is always A (alpha). This format may represent pre-multiplied or non-premultiplied alpha.</div><div class="line">&gt; &gt; All four planes are guaranteed to have the same row strides and pixel strides.</div><div class="line">&gt; &gt;</div></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<p>&gt;</p>
<blockquote>
<h4 id="YUV-420-888-YUV-422-888-YUV-444-888"><a href="#YUV-420-888-YUV-422-888-YUV-444-888" class="headerlink" title="YUV_420 _888, YUV_422 _888, YUV_444 888"></a>YUV_420 _888, YUV_422 _888, YUV_444 888</h4><blockquote>
<p>类似于<strong>RGB</strong>，<strong>YUV</strong>也是一种颜色编码格式，其中Y表示明亮度，U和V表示色度，浓度。</p>
<p>YUV，YCbCr都称为YUV。</p>
<p>YUV的存储格式有两种，一种是紧缩格式（packed format），存储方式类似于RGB，所有的值保存在一个矩阵中，每个像素点的Y,U,V值，紧挨着放在一起。另外一种是平面格式（planar format），将Y,U,V三个分量分别放在不同的矩阵中。</p>
<p>根据每个像素点采样的不同，YUV数据又可以分为YUV420，YUV422，YUV444</p>
<ul>
<li>YUV444：表示完全采样，每个像素点都有自己的Y分量和UV分量。</li>
<li>YUV422：表示水平2:1采样，垂直完全采样。每个像素点都有自己的Y分量，水平方向，每两个像素点共用UV分量。</li>
<li>YUV420：表示水平和垂直都是2:1采样，每个像素点都有自己的Y分量，水平和垂直方向，每四个点共用UV分量。</li>
</ul>
</blockquote>
<h4 id="NV16和NV21"><a href="#NV16和NV21" class="headerlink" title="NV16和NV21"></a>NV16和NV21</h4><blockquote>
<p><strong>NV16</strong>是YUV422SP，<strong>NV21</strong>是YUV420SP，Y分量是一个平面（plane），UV分量是一个平面（plane）。</p>
<p>后缀<strong>SP</strong>的意思是Semi-Planar,表示图像数据不是分成三个平面，而是两个。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; &gt; NV16 is YCbCr format, used for video. For camera, the YUV_420_888 format is recommanded for YUV output instead.</div><div class="line">&gt; &gt; NV21 is YCrCb format used for images, which uses the NV21 encoding format. This is the default format for Camera preview images, when not otherwise set with setPreviewFormat(int).</div><div class="line">&gt; &gt;</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="RAW10和RAW12"><a href="#RAW10和RAW12" class="headerlink" title="RAW10和RAW12"></a>RAW10和RAW12</h4><blockquote>
<p><strong>RAW</strong>是记录图像传感器未被处理的原始图像数据。</p>
<ul>
<li><strong>RAW10</strong>表示每个像素用10bit的数据表示，具体格式如下，第五个byte会记录前面四个像素的第0bit和第1bit。</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>bit 7</th>
<th>bit 6</th>
<th>bit 5</th>
<th>bit 4</th>
<th>bit 3</th>
<th>bit 2</th>
<th>bit 1</th>
<th>bit 0</th>
</tr>
</thead>
<tbody>
<tr>
<td>Byte 0:</td>
<td>P0[9]</td>
<td>P0[8]</td>
<td>P0[7]</td>
<td>P0[6]</td>
<td>P0[5]</td>
<td>P0[4]</td>
<td>P0[3]</td>
<td>P0[2]</td>
</tr>
<tr>
<td>Byte 1:</td>
<td>P1[9]</td>
<td>P1[8]</td>
<td>P1[7]</td>
<td>P1[6]</td>
<td>P1[5]</td>
<td>P1[4]</td>
<td>P1[3]</td>
<td>P1[2]</td>
</tr>
<tr>
<td>Byte 2:</td>
<td>P2[9]</td>
<td>P2[8]</td>
<td>P2[7]</td>
<td>P2[6]</td>
<td>P2[5]</td>
<td>P2[4]</td>
<td>P2[3]</td>
<td>P2[2]</td>
</tr>
<tr>
<td>Byte 3:</td>
<td>P3[9]</td>
<td>P3[8]</td>
<td>P3[7]</td>
<td>P3[6]</td>
<td>P3[5]</td>
<td>P3[4]</td>
<td>P3[3]</td>
<td>P3[2]</td>
</tr>
<tr>
<td>Byte 4:</td>
<td>P3[1]</td>
<td>P3[0]</td>
<td>P2[1]</td>
<td>P2[0]</td>
<td>P1[1]</td>
<td>P1[0]</td>
<td>P0[1]</td>
<td>P0[0]</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>RAW12</strong>表示每个像素用12bit的数据表示，具体格式如下，第三个byte会记录前面两个像素点的第0～3位。</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>bit 7</th>
<th>bit 6</th>
<th>bit 5</th>
<th>bit 4</th>
<th>bit 3</th>
<th>bit 2</th>
<th>bit 1</th>
<th>bit 0</th>
</tr>
</thead>
<tbody>
<tr>
<td>Byte 0:</td>
<td>P0[11]</td>
<td>P0[10]</td>
<td>P0[ 9]</td>
<td>P0[ 8]</td>
<td>P0[ 7]</td>
<td>P0[ 6]</td>
<td>P0[ 5]</td>
<td>P0[ 4]</td>
</tr>
<tr>
<td>Byte 1:</td>
<td>P1[11]</td>
<td>P1[10]</td>
<td>P1[ 9]</td>
<td>P1[ 8]</td>
<td>P1[ 7]</td>
<td>P1[ 6]</td>
<td>P1[ 5]</td>
<td>P1[ 4]</td>
</tr>
<tr>
<td>Byte 2:</td>
<td>P1[ 3]</td>
<td>P1[ 2]</td>
<td>P1[ 1]</td>
<td>P1[ 0]</td>
<td>P0[ 3]</td>
<td>P0[ 2]</td>
<td>P0[ 1]</td>
<td>P0[ 0]</td>
</tr>
</tbody>
</table>
</blockquote>
<h4 id="RAW-PRIVATE-和-RAW-SENOR"><a href="#RAW-PRIVATE-和-RAW-SENOR" class="headerlink" title="RAW_PRIVATE 和 RAW_SENOR"></a>RAW_PRIVATE 和 RAW_SENOR</h4><blockquote>
<ul>
<li><strong>RAW_PRIVATE</strong>是依赖具体实现的raw格式.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; &gt; Private raw camera sensor image format, a single channel image with implementation depedent pixel layout.</div><div class="line"></div><div class="line">&gt;&gt; RAW_PRIVATE is a format for unprocessed raw image buffers coming from an image sensor. The actual structure of buffers of this format is implementation-dependent.</div><div class="line">&gt; &gt;</div></pre></td></tr></table></figure>
<ul>
<li><strong>RAW_SENSOR</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; &gt; General raw camera sensor image format, usually representing a single-channel Bayer-mosaic image. Each pixel color sample is stored with 16 bits of precision.</div><div class="line"></div><div class="line">&gt;&gt; The layout of the color mosaic, the maximum and minimum encoding values of the raw pixel data, the color space of the image, and all other needed information to interpret a raw sensor image must be queried from the CameraDevice which produced the image.</div><div class="line">&gt; &gt;</div></pre></td></tr></table></figure>
</blockquote>
<h4 id="PRIVATE"><a href="#PRIVATE" class="headerlink" title="PRIVATE"></a>PRIVATE</h4><blockquote>
<p>私有的，不透明的format，应用无法获得其具体的图像数据，只能通过相关接口做图像处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; &gt; Android private opaque image format.</div><div class="line"></div><div class="line">&gt; &gt; The choices of the actual format and pixel data layout are entirely up to the device-specific and framework internal implementations, and may vary depending on use cases even for the same device. The buffers of this format can be produced by components like ImageWriter , and interpreted correctly by consumers like CameraDevice based on the device/framework private information. However, these buffers are not directly accessible to the application.</div><div class="line"></div><div class="line">&gt;&gt;When an Image of this format is obtained from an ImageReader or ImageWriter, the getPlanes() method will return an empty Plane array.</div><div class="line"></div><div class="line">&gt;&gt;If a buffer of this format is to be used as an OpenGL ES texture, the framework will assume that sampling the texture will always return an alpha value of 1.0 (i.e. the buffer contains only opaque pixel values).</div><div class="line">&gt; &gt;</div></pre></td></tr></table></figure></blockquote>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/01/Android-Image-Format/" data-id="cj5tqvpv00001zgmpndnsxf2t" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2017/07/30/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/08/01/Android-Image-Format/">Android Image Format</a>
          </li>
        
          <li>
            <a href="/2017/07/30/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Hao Wang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>